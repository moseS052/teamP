<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.team.pj.iteamP">
<select id='getNoteCon' resultType="com.team.pj.noteVO">
	select * from note where (m_no=#{param1} and m_pa_no=#{param2}) or (m_no=#{param2} and m_pa_no=#{param1}) order by n_date
</select>
<insert id='noteSend'>
	insert into note values(note_sq.nextval,#{param1},#{param3},current_date,#{param2})
</insert>
<select id="comlist" resultType="com.team.pj.commentDTO">
	select c_no, b_no, c_con, m_no, c_date, c_pa_no from comment_t where b_no=#{param1} and c_pa_no is null order by c_date
</select>
<insert id="insertcomment">
	insert into comment_t(c_no, b_no, c_con, m_no, c_date) 
		values(comment_sq.nextval,#{param1},#{param2},#{param3},CURRENT_date)
</insert>
<delete id="deletecomment">
	delete comment_t where c_no=#{param1} OR c_pa_no=#{param1}
</delete>
<update id="updatecomment">
	update comment_t set c_con=#{param1} where c_no=#{param2}
</update>
<select id="re_replylist" resultType="com.team.pj.commentDTO">
	select c_no, b_no, c_con, m_no, c_date, c_pa_no
		from comment_t
		where c_pa_no=#{param1} order by c_date
</select>
<select id="countre_replylist" resultType="int">
	select count(c_pa_no) replycount from comment_t where c_pa_no=#{param1}
</select>
<insert id="insertReRply">
	insert into comment_t values(comment_sq.nextval,#{param1},#{param2},#{param3},CURRENT_date,#{param4})
</insert>
<delete id="deleteReReply">
	delete comment_t where c_no=#{param1}
</delete>
<update id="updateReReply">
	update comment_t set c_con=#{param3} where c_no=#{param1} AND b_no=#{param2} AND m_no=#{param4} AND c_pa_no=#{param5}
</update>
<select id="listMember" resultType="com.team.pj.memberDTO">
	select * from member 
</select>
<insert id="insert">
	insert into member(m_no,id,pw,name,nick,phone,gender,mail,birth)
	values(member_sq.nextval,#{param1},#{param2},#{param3},#{param4},#{param5},#{param6},#{param7},#{param8})	
</insert>
<insert id="talent">
	insert into talent_check values(#{param1},#{param2})
</insert>
<select id="count" resultType="int">
	select count(*) cnt from member where id=#{param1} and pw=#{param2}
</select>
<select id="id" resultType="int">
	select count(id) idcnt from member where id=#{param1}
</select>
<select id="getM_no1" resultType="int">
	select m_no from member where id=#{param1}	
</select>
<select id="nick" resultType="int">
	select count(nick) nickcnt from member where nick=#{param1}
</select>
<select id="getM_noNick" resultType="com.team.pj.L_listDTO"> 
	select m_no,nick from member where m_no=#{param1}
</select>
<select id="getL_list" resultType="com.team.pj.L_listDTO"> 
	select l_no,m_no,l_title,to_char(l_date, 'YYYY-MM-DD') l_date from list where l_koo=#{param1} order by l_date
</select>
<select id="Openl_list" resultType="com.team.pj.L_listDTO"> 
	select l_no,m_no,l_title,to_char(l_date, 'YYYY-MM-DD') l_date from list order by l_date
</select>
<insert id="new_ad">
	insert into list values(list_sq.nextval,#{param1},#{param2},#{param3},current_date,#{param4},#{param5},#{param6},#{param7})
</insert>
<select id="checkl_no" resultType="int"> 
	select l_no from list where m_no=#{param1} and l_date=#{param2}
</select>
<insert id="check_ad">
	insert into talent_check_list values(#{param1},#{param2})
</insert>
<select id="l_read" resultType="com.team.pj.L_listDTO"> 
	select  a.l_title ,a.m_no ,a.l_con ,a.l_name, a.l_address, a.l_date , b.nick from list a , member b where a.m_no=b.m_no and l_no=#{param1}
</select>
<select id="getNickById" resultType="String">
	select nick from member where id=#{param1}
</select>
<delete id="L_del">
	delete from list where l_no=#{param1}
</delete> 
</mapper>